<script>
    function setActiveImage(src) {
        document.getElementById('active_image').src = src;
    }

</script>

<script id="sectionTemplate" type="text/x-jquery-tmpl">
    
    <div class="main">
        <section class="module">
          <div class="container">
            <div class="row">
              <div class="col-sm-6 mb-sm-40"><img id="active_image" src="${main_image_url}" alt="${title}"/>
                <ul class="product-gallery">
                {{each(i, image) images}}
                <li><a class="gallery" href="${image}" onclick="setActiveImage('${image}'); return false;"><img src="${image}" alt="${title} image ${i+1}"/></a></li>
                {{/each}}
                </ul>
              </div>
              <div class="col-sm-6">
                <div class="row">
                  <div class="col-sm-12">
                    <p><a href="#productList"><i class="fa fa-angle-left"></i> Back to search results</a></p>
                    <h1 class="product-title font-alt">${title}</h1>
                  </div>
                </div>
                <div class="row mb-20">
                  <div class="col-sm-12">
                    <div class="price font-alt"><span class="amount">$${price}</span></div>
                  </div>
                </div>
                <div class="row mb-20">
                  <div class="col-sm-12">
                    <div class="description">
                      <p>${description}</p>
                    </div>
                  </div>
                </div>
                {{if quantity > 0}}
                <div class="row mb-20">
                  <div class="col-sm-12">
                    <p><strong>Stock:</strong> ${quantity} available</p>
                  </div>
                </div>
                <div class="row mb-20">
                  <div class="col-sm-4 mb-sm-20">
                    <input id="quantity" class="form-control input-lg" type="number" name="" value="1" max="${quantity}" min="1" required="required"/>
                  </div>
                  <div class="col-sm-8">
                    <a id="add-to-cart-btn-${id}" class="btn btn-lg btn-block btn-round btn-b" onclick="addToCartWithFeedback(${id}, { id: ${id}, title: ${JSON.stringify(title)}, price: ${price}, quantity: document.getElementById('quantity').valueAsNumber, image: ${JSON.stringify(main_image_url)} }); return false;">Add To Cart</a>
                    <div id="cart-feedback-${id}" style="display: none; margin-top: 15px; text-align: center;">
                      <p style="color: #27ae60; font-weight: 600; margin-bottom: 10px;">
                        <i class="fa fa-check-circle" style="margin-right: 8px;"></i>Added to cart successfully!
                      </p>
                      <a href="index.html#cart" class="btn btn-outline btn-sm" style="margin-right: 10px;">
                        <i class="fa fa-shopping-cart" style="margin-right: 5px;"></i>View Cart
                      </a>
                      <a href="index.html#checkout" class="btn btn-b btn-sm">
                        <i class="fa fa-credit-card" style="margin-right: 5px;"></i>Go to Checkout
                      </a>
                    </div>
                  </div>
                </div>
                {{else}}
                <div class="row mb-20">
                  <div class="col-sm-12">
                    <p><strong>Stock:</strong> Out of Stock</p>
                  </div>
                </div>
                <div class="row mb-20">
                  <div class="col-sm-12">
                    <a class="btn btn-lg btn-block btn-round btn-b" disabled>Out of Stock</a>
                  </div>
                </div>
                {{/if}}
                <div class="row mb-20">
                  <div class="col-sm-12">
                    <div class="product_meta">Categories:
                        {{each(i, category) categories}}
                        <a href="#">${category}</a>{{if i < categories.length - 1}}, {{/if}}
                        {{/each}}
                    </div>
                  </div>
                </div>
                <div class="row mb-20">
                  <div class="col-sm-12">
                    <div id="data-ssheet">
                        <table class="table table-striped ds-table table-responsive">
                          <tbody>
                            <tr>
                              <th>Title</th>
                              <th>Info</th>
                            </tr>
                            {{each(key, val) details}}
                            <tr>
                              <td>${key.charAt(0).toUpperCase() + key.slice(1)}</td>
                              <td>${val}</td>
                            </tr>
                            {{/each}}
                          </tbody>
                        </table>
                      </div>
    
                    </div>
                  </div>
                </div>


              </div>
            </div>

          </div>
        </section>
      </div>

</script>
